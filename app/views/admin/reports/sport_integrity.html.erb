<% title "Sports Integrity Reports" %>

<h1><%= yield(:title) %></h1>

<h3>Sections with no Sport Coordinator (<%= @sections_wo_sc.size %>)</h3>

<% if @sections_wo_sc.empty? %>
	<p>None</p>

<% else %>
	<div class="accordion" id="wo_sc_accordion">
		<div class="accordion-item">
			<h3 class="accordion-header" id="wo_sc_heading">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#wo_sc_collapse" aria-expanded="false" aria-controls="wo_sc_collapse">
					Show sections (click to expand)
				</button>
			</h3>
			<div id="wo_sc_collapse" class="accordion-collapse collapse" aria-labelledby="wo_sc_heading" data-bs-parent="#wo_sc_accordion">
				<div class="accordion-body">
					<table class="table table-dark table-striped">
						<% @sections_wo_sc.each do |s| %>
							<tr valign="top">
								<td>
									<%= s.name %>
								</td>
							</tr>
						<% end %>
					</table>
				</div>
			</div>
		</div>
	</div>
<% end %>

<br/>
<br/>

<h3>Sections with more more entries than allowed (<%= @sections_over_limit.size %>)</h3>

<% if @sections_over_limit.empty? %>
	<p>None</p>

<% else %>
	<div class="accordion" id="over_limit_accordion">
		<div class="accordion-item">
			<h3 class="accordion-header" id="over_limit_heading">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#over_limit_collapse" aria-expanded="false" aria-controls="over_limit_collapse">
					Show sections (click to expand)
				</button>
			</h3>
			<div id="over_limit_collapse" class="accordion-collapse collapse" aria-labelledby="over_limit_heading" data-bs-parent="#over_limit_accordion">
				<div class="accordion-body">
					<table class="table table-dark table-striped">
						<% @sections_over_limit.each do |s| %>
							<tr valign="top">
								<td>
									<%= s.name %> (<%= s.sport_entries.size %>)
								</td>
							</tr>
						<% end %>
					</table>
				</div>
			</div>
		</div>
	</div>
<% end %>


<br/>
<br/>

<h3>Sections with too few entries (<%= @sections_under_subscribed.size %>)</h3>

<% if @sections_under_subscribed.empty? %>
	<p>None</p>

<% else %>
	<div class="accordion" id="under_subscribed_accordion">
		<div class="accordion-item">
			<h3 class="accordion-header" id="under_subscribed_heading">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#under_subscribed_collapse" aria-expanded="false" aria-controls="under_subscribed_collapse">
					Show sections (click to expand)
				</button>
			</h3>
			<div id="under_subscribed_collapse" class="accordion-collapse collapse" aria-labelledby="under_subscribed_heading" data-bs-parent="#under_subscribed_accordion">
				<div class="accordion-body">
					<table class="table table-dark table-striped">
						<% @sections_under_subscribed.each do |s| %>
							<tr valign="top">
								<td>
									<%= s.name %> (<%= s.sport_entries.size %>)
								</td>
							</tr>
						<% end %>
					</table>
				</div>
			</div>
		</div>
	</div>
<% end %>


<br/>
<br/>

<h3>Sections with more than two from same group (<%= @sections_too_many.size %>)</h3>

<% if @sections_too_many.empty? %>
	<p>None</p>

<% else %>
	<div class="accordion" id="too_many_accordion">
		<div class="accordion-item">
			<h3 class="accordion-header" id="too_many_heading">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#too_many_collapse" aria-expanded="false" aria-controls="too_many_collapse">
					Show sections (click to expand)
				</button>
			</h3>
			<div id="too_many_collapse" class="accordion-collapse collapse" aria-labelledby="too_many_heading" data-bs-parent="#too_many_accordion">
				<div class="accordion-body">
					<table class="table table-dark table-striped">
						<% @sections_too_many.each do |s| %>
							<tr valign="top">
								<td>
									<%= s.name %> 
								</td>
							</tr>
						<% end %>
					</table>
				</div>
			</div>
		</div>
	</div>
<% end %>


<br/>
<br/>

<h3>Sport Coordinators with conflicting sections (<%= @section_conflicts.size %>)</h3>

<% if @section_conflicts.empty? %>
	<p>None</p>

<% else %>
	<div class="accordion" id="conflict_accordion">
		<div class="accordion-item">
			<h3 class="accordion-header" id="conflict_heading">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#conflict_collapse" aria-expanded="false" aria-controls="conflict_collapse">
					Show sections (click to expand)
				</button>
			</h3>
			<div id="conflict_collapse" class="accordion-collapse collapse" aria-labelledby="conflict_heading" data-bs-parent="#conflict_accordion">
				<div class="accordion-body">
					<table class="table table-dark table-striped">
						<% @section_conflicts.each do |s| %>
							<tr valign="top">
								<td>
									<%= s.name %>
								</td>
							</tr>
						<% end %>
					</table>
				</div>
			</div>
		</div>
	</div>
<% end %>
